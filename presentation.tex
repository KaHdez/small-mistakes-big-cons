% Options for packages loaded elsewhere
% Options for packages loaded elsewhere
\PassOptionsToPackage{unicode}{hyperref}
\PassOptionsToPackage{hyphens}{url}
\PassOptionsToPackage{dvipsnames,svgnames,x11names}{xcolor}
%
\documentclass[
  a4paper,
  DIV=11,
  numbers=noendperiod]{scrartcl}
\usepackage{xcolor}
\usepackage{amsmath,amssymb}
\setcounter{secnumdepth}{-\maxdimen} % remove section numbering
\usepackage{iftex}
\ifPDFTeX
  \usepackage[T1]{fontenc}
  \usepackage[utf8]{inputenc}
  \usepackage{textcomp} % provide euro and other symbols
\else % if luatex or xetex
  \usepackage{unicode-math} % this also loads fontspec
  \defaultfontfeatures{Scale=MatchLowercase}
  \defaultfontfeatures[\rmfamily]{Ligatures=TeX,Scale=1}
\fi
\usepackage{lmodern}
\ifPDFTeX\else
  % xetex/luatex font selection
\fi
% Use upquote if available, for straight quotes in verbatim environments
\IfFileExists{upquote.sty}{\usepackage{upquote}}{}
\IfFileExists{microtype.sty}{% use microtype if available
  \usepackage[]{microtype}
  \UseMicrotypeSet[protrusion]{basicmath} % disable protrusion for tt fonts
}{}
\makeatletter
\@ifundefined{KOMAClassName}{% if non-KOMA class
  \IfFileExists{parskip.sty}{%
    \usepackage{parskip}
  }{% else
    \setlength{\parindent}{0pt}
    \setlength{\parskip}{6pt plus 2pt minus 1pt}}
}{% if KOMA class
  \KOMAoptions{parskip=half}}
\makeatother
% Make \paragraph and \subparagraph free-standing
\makeatletter
\ifx\paragraph\undefined\else
  \let\oldparagraph\paragraph
  \renewcommand{\paragraph}{
    \@ifstar
      \xxxParagraphStar
      \xxxParagraphNoStar
  }
  \newcommand{\xxxParagraphStar}[1]{\oldparagraph*{#1}\mbox{}}
  \newcommand{\xxxParagraphNoStar}[1]{\oldparagraph{#1}\mbox{}}
\fi
\ifx\subparagraph\undefined\else
  \let\oldsubparagraph\subparagraph
  \renewcommand{\subparagraph}{
    \@ifstar
      \xxxSubParagraphStar
      \xxxSubParagraphNoStar
  }
  \newcommand{\xxxSubParagraphStar}[1]{\oldsubparagraph*{#1}\mbox{}}
  \newcommand{\xxxSubParagraphNoStar}[1]{\oldsubparagraph{#1}\mbox{}}
\fi
\makeatother

\usepackage{color}
\usepackage{fancyvrb}
\newcommand{\VerbBar}{|}
\newcommand{\VERB}{\Verb[commandchars=\\\{\}]}
\DefineVerbatimEnvironment{Highlighting}{Verbatim}{commandchars=\\\{\}}
% Add ',fontsize=\small' for more characters per line
\usepackage{framed}
\definecolor{shadecolor}{RGB}{241,243,245}
\newenvironment{Shaded}{\begin{snugshade}}{\end{snugshade}}
\newcommand{\AlertTok}[1]{\textcolor[rgb]{0.68,0.00,0.00}{#1}}
\newcommand{\AnnotationTok}[1]{\textcolor[rgb]{0.37,0.37,0.37}{#1}}
\newcommand{\AttributeTok}[1]{\textcolor[rgb]{0.40,0.45,0.13}{#1}}
\newcommand{\BaseNTok}[1]{\textcolor[rgb]{0.68,0.00,0.00}{#1}}
\newcommand{\BuiltInTok}[1]{\textcolor[rgb]{0.00,0.23,0.31}{#1}}
\newcommand{\CharTok}[1]{\textcolor[rgb]{0.13,0.47,0.30}{#1}}
\newcommand{\CommentTok}[1]{\textcolor[rgb]{0.37,0.37,0.37}{#1}}
\newcommand{\CommentVarTok}[1]{\textcolor[rgb]{0.37,0.37,0.37}{\textit{#1}}}
\newcommand{\ConstantTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{#1}}
\newcommand{\ControlFlowTok}[1]{\textcolor[rgb]{0.00,0.23,0.31}{\textbf{#1}}}
\newcommand{\DataTypeTok}[1]{\textcolor[rgb]{0.68,0.00,0.00}{#1}}
\newcommand{\DecValTok}[1]{\textcolor[rgb]{0.68,0.00,0.00}{#1}}
\newcommand{\DocumentationTok}[1]{\textcolor[rgb]{0.37,0.37,0.37}{\textit{#1}}}
\newcommand{\ErrorTok}[1]{\textcolor[rgb]{0.68,0.00,0.00}{#1}}
\newcommand{\ExtensionTok}[1]{\textcolor[rgb]{0.00,0.23,0.31}{#1}}
\newcommand{\FloatTok}[1]{\textcolor[rgb]{0.68,0.00,0.00}{#1}}
\newcommand{\FunctionTok}[1]{\textcolor[rgb]{0.28,0.35,0.67}{#1}}
\newcommand{\ImportTok}[1]{\textcolor[rgb]{0.00,0.46,0.62}{#1}}
\newcommand{\InformationTok}[1]{\textcolor[rgb]{0.37,0.37,0.37}{#1}}
\newcommand{\KeywordTok}[1]{\textcolor[rgb]{0.00,0.23,0.31}{\textbf{#1}}}
\newcommand{\NormalTok}[1]{\textcolor[rgb]{0.00,0.23,0.31}{#1}}
\newcommand{\OperatorTok}[1]{\textcolor[rgb]{0.37,0.37,0.37}{#1}}
\newcommand{\OtherTok}[1]{\textcolor[rgb]{0.00,0.23,0.31}{#1}}
\newcommand{\PreprocessorTok}[1]{\textcolor[rgb]{0.68,0.00,0.00}{#1}}
\newcommand{\RegionMarkerTok}[1]{\textcolor[rgb]{0.00,0.23,0.31}{#1}}
\newcommand{\SpecialCharTok}[1]{\textcolor[rgb]{0.37,0.37,0.37}{#1}}
\newcommand{\SpecialStringTok}[1]{\textcolor[rgb]{0.13,0.47,0.30}{#1}}
\newcommand{\StringTok}[1]{\textcolor[rgb]{0.13,0.47,0.30}{#1}}
\newcommand{\VariableTok}[1]{\textcolor[rgb]{0.07,0.07,0.07}{#1}}
\newcommand{\VerbatimStringTok}[1]{\textcolor[rgb]{0.13,0.47,0.30}{#1}}
\newcommand{\WarningTok}[1]{\textcolor[rgb]{0.37,0.37,0.37}{\textit{#1}}}

\usepackage{longtable,booktabs,array}
\usepackage{calc} % for calculating minipage widths
% Correct order of tables after \paragraph or \subparagraph
\usepackage{etoolbox}
\makeatletter
\patchcmd\longtable{\par}{\if@noskipsec\mbox{}\fi\par}{}{}
\makeatother
% Allow footnotes in longtable head/foot
\IfFileExists{footnotehyper.sty}{\usepackage{footnotehyper}}{\usepackage{footnote}}
\makesavenoteenv{longtable}
\usepackage{graphicx}
\makeatletter
\newsavebox\pandoc@box
\newcommand*\pandocbounded[1]{% scales image to fit in text height/width
  \sbox\pandoc@box{#1}%
  \Gscale@div\@tempa{\textheight}{\dimexpr\ht\pandoc@box+\dp\pandoc@box\relax}%
  \Gscale@div\@tempb{\linewidth}{\wd\pandoc@box}%
  \ifdim\@tempb\p@<\@tempa\p@\let\@tempa\@tempb\fi% select the smaller of both
  \ifdim\@tempa\p@<\p@\scalebox{\@tempa}{\usebox\pandoc@box}%
  \else\usebox{\pandoc@box}%
  \fi%
}
% Set default figure placement to htbp
\def\fps@figure{htbp}
\makeatother





\setlength{\emergencystretch}{3em} % prevent overfull lines

\providecommand{\tightlist}{%
  \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}



 


\usepackage{booktabs}
\usepackage{longtable}
\usepackage{array}
\usepackage{multirow}
\usepackage{wrapfig}
\usepackage{float}
\usepackage{colortbl}
\usepackage{pdflscape}
\usepackage{tabu}
\usepackage{threeparttable}
\usepackage{threeparttablex}
\usepackage[normalem]{ulem}
\usepackage{makecell}
\usepackage{xcolor}
\KOMAoption{captions}{tableheading}
\makeatletter
\@ifpackageloaded{caption}{}{\usepackage{caption}}
\AtBeginDocument{%
\ifdefined\contentsname
  \renewcommand*\contentsname{Table of contents}
\else
  \newcommand\contentsname{Table of contents}
\fi
\ifdefined\listfigurename
  \renewcommand*\listfigurename{List of Figures}
\else
  \newcommand\listfigurename{List of Figures}
\fi
\ifdefined\listtablename
  \renewcommand*\listtablename{List of Tables}
\else
  \newcommand\listtablename{List of Tables}
\fi
\ifdefined\figurename
  \renewcommand*\figurename{Figure}
\else
  \newcommand\figurename{Figure}
\fi
\ifdefined\tablename
  \renewcommand*\tablename{Table}
\else
  \newcommand\tablename{Table}
\fi
}
\@ifpackageloaded{float}{}{\usepackage{float}}
\floatstyle{ruled}
\@ifundefined{c@chapter}{\newfloat{codelisting}{h}{lop}}{\newfloat{codelisting}{h}{lop}[chapter]}
\floatname{codelisting}{Listing}
\newcommand*\listoflistings{\listof{codelisting}{List of Listings}}
\makeatother
\makeatletter
\makeatother
\makeatletter
\@ifpackageloaded{caption}{}{\usepackage{caption}}
\@ifpackageloaded{subcaption}{}{\usepackage{subcaption}}
\makeatother
\usepackage{bookmark}
\IfFileExists{xurl.sty}{\usepackage{xurl}}{} % add URL line breaks if available
\urlstyle{same}
\hypersetup{
  pdftitle={Small Errors, Big Consequences: Lessons from Data Mismanagement in Business},
  pdfauthor={Karla Hernández - 400916125 - hernandez.karla@stud.hs-fresenius.de},
  colorlinks=true,
  linkcolor={blue},
  filecolor={Maroon},
  citecolor={Blue},
  urlcolor={Blue},
  pdfcreator={LaTeX via pandoc}}


\title{Small Errors, Big Consequences: Lessons from Data Mismanagement
in Business}
\author{Karla Hernández - 400916125 -
hernandez.karla@stud.hs-fresenius.de}
\date{}
\begin{document}
\maketitle


\subsection{Scan me}\label{scan-me}

\begin{figure}

\centering{

\includegraphics[width=0.6\linewidth,height=\textheight,keepaspectratio]{qr-code.png}

}

\caption{\label{fig-qr-code}}

\end{figure}%

\subsection{Why Smalls Errors Matter}\label{why-smalls-errors-matter}

\begin{itemize}
\tightlist
\item
  Data drives decisions in production, hiring, marketing \& forecasting
\item
  Most business data failures are not dramatic bugs
\item
  They come from tiny, unnoticed mistakes
\item
  If the data is wrong, the decision is wrong
\item
  RStudio does not warn when results are logically wrong
\end{itemize}

\subsection{What Counts as a ``Small
Error''?}\label{what-counts-as-a-small-error}

\phantomsection\label{tbl}
\begin{longtable}[]{@{}ll@{}}
\toprule\noalign{}
Error & What it Means \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
``Mexico'' vs ``México'' & R treats them as two different categories \\
Number stored as text & Math doesn't work the way we expect \\
Missing values & Averages and totals become wrong \\
Duplicate rows & Customers or employees counted twice \\
Wrong join & Rows multiply or disappear silently \\
\end{longtable}

\subsection{Tiny Errors, Big
Consequences}\label{tiny-errors-big-consequences}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\linewidth - 4\tabcolsep) * \real{0.3333}}
  >{\raggedright\arraybackslash}p{(\linewidth - 4\tabcolsep) * \real{0.3333}}
  >{\raggedright\arraybackslash}p{(\linewidth - 4\tabcolsep) * \real{0.3333}}@{}}
\toprule\noalign{}
\begin{minipage}[b]{\linewidth}\raggedright
Area
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Tiny Error
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Big Result
\end{minipage} \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
Retail & Missing value in sales & Too little production that leads to
lost on sales \\
HR & Employee duplicated during merge & Over-hired people that leads to
unnecessary cost \\
Marketing & Duplicated customers & Overspent on ads \\
\end{longtable}

\subsection{Bad Practice vs Good
Practice}\label{bad-practice-vs-good-practice}

\emph{Scenario:}

What is the average purchase amount of customers under 30, and how does
it differ by location?

\begin{itemize}
\tightlist
\item
  Click to download dataset: CSV shopping\_behavior dataset
\end{itemize}

\subsection{Bad Practice Example}\label{bad-practice-example}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# BAD import: let R guess names and types}
\NormalTok{data\_bad }\OtherTok{\textless{}{-}} \FunctionTok{read.csv}\NormalTok{(}\StringTok{"shopping\_behavior.csv"}\NormalTok{)}

\CommentTok{\# BAD filter (forgetting to handle NA)}
\NormalTok{young\_bad }\OtherTok{\textless{}{-}}\NormalTok{ data\_bad[data\_bad}\SpecialCharTok{$}\NormalTok{Age }\SpecialCharTok{\textless{}} \DecValTok{30}\NormalTok{, ]}

\CommentTok{\# BAD join using merge() with the same location\_info}
\NormalTok{location\_info }\OtherTok{\textless{}{-}} \FunctionTok{data.frame}\NormalTok{(}
  \AttributeTok{Location =} \FunctionTok{c}\NormalTok{(}\StringTok{"California"}\NormalTok{, }\StringTok{"New York"}\NormalTok{, }\StringTok{"Texas"}\NormalTok{, }\StringTok{"Florida"}\NormalTok{),}
  \AttributeTok{Region   =} \FunctionTok{c}\NormalTok{(}\StringTok{"West"}\NormalTok{, }\StringTok{"East"}\NormalTok{, }\StringTok{"South"}\NormalTok{, }\StringTok{"South"}\NormalTok{),}
  \AttributeTok{stringsAsFactors =} \ConstantTok{FALSE}
\NormalTok{)}

\NormalTok{merged\_bad }\OtherTok{\textless{}{-}} \FunctionTok{merge}\NormalTok{(young\_bad, location\_info)}

\CommentTok{\# BAD summary: mean without na.rm and no cleaning of Location variants}
\NormalTok{result\_bad }\OtherTok{\textless{}{-}} \FunctionTok{aggregate}\NormalTok{(Purchase.Amount..USD. }\SpecialCharTok{\textasciitilde{}}\NormalTok{ Location, }\AttributeTok{data =}\NormalTok{ merged\_bad, }\AttributeTok{FUN =}\NormalTok{ mean)}

\CommentTok{\# Rename columns to match good version later}
\FunctionTok{names}\NormalTok{(result\_bad) }\OtherTok{\textless{}{-}} \FunctionTok{c}\NormalTok{(}\StringTok{"Location\_clean"}\NormalTok{, }\StringTok{"avg\_spend\_bad"}\NormalTok{)}
\NormalTok{result\_bad}\SpecialCharTok{$}\NormalTok{avg\_spend\_bad }\OtherTok{\textless{}{-}} \FunctionTok{round}\NormalTok{(result\_bad}\SpecialCharTok{$}\NormalTok{avg\_spend\_bad, }\DecValTok{2}\NormalTok{)}

\NormalTok{result\_bad}
\FunctionTok{print}\NormalTok{(result\_bad, }\AttributeTok{n =} \ConstantTok{Inf}\NormalTok{)}
\FunctionTok{View}\NormalTok{(result\_bad)}
\end{Highlighting}
\end{Shaded}

\subsection{Outcome}\label{outcome}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# BAD import: let R guess names and types}
\NormalTok{data\_bad }\OtherTok{\textless{}{-}} \FunctionTok{read.csv}\NormalTok{(}\StringTok{"shopping\_behavior.csv"}\NormalTok{)}

\CommentTok{\# BAD filter (forgetting to handle NA, using base [] correctly this time but no cleaning)}
\NormalTok{young\_bad }\OtherTok{\textless{}{-}}\NormalTok{ data\_bad[data\_bad}\SpecialCharTok{$}\NormalTok{Age }\SpecialCharTok{\textless{}} \DecValTok{30}\NormalTok{, ]}

\CommentTok{\# BAD join using merge() with the same location\_info}
\NormalTok{location\_info }\OtherTok{\textless{}{-}} \FunctionTok{data.frame}\NormalTok{(}
  \AttributeTok{Location =} \FunctionTok{c}\NormalTok{(}\StringTok{"California"}\NormalTok{, }\StringTok{"New York"}\NormalTok{, }\StringTok{"Texas"}\NormalTok{, }\StringTok{"Florida"}\NormalTok{),}
  \AttributeTok{Region   =} \FunctionTok{c}\NormalTok{(}\StringTok{"West"}\NormalTok{, }\StringTok{"East"}\NormalTok{, }\StringTok{"South"}\NormalTok{, }\StringTok{"South"}\NormalTok{),}
  \AttributeTok{stringsAsFactors =} \ConstantTok{FALSE}
\NormalTok{)}

\NormalTok{merged\_bad }\OtherTok{\textless{}{-}} \FunctionTok{merge}\NormalTok{(young\_bad, location\_info)}

\CommentTok{\# BAD summary: mean without na.rm and no cleaning of Location variants}
\NormalTok{result\_bad }\OtherTok{\textless{}{-}} \FunctionTok{aggregate}\NormalTok{(Purchase.Amount..USD. }\SpecialCharTok{\textasciitilde{}}\NormalTok{ Location, }\AttributeTok{data =}\NormalTok{ merged\_bad, }\AttributeTok{FUN =}\NormalTok{ mean)}

\CommentTok{\# Rename columns to match good version later}
\FunctionTok{names}\NormalTok{(result\_bad) }\OtherTok{\textless{}{-}} \FunctionTok{c}\NormalTok{(}\StringTok{"Location\_clean"}\NormalTok{, }\StringTok{"avg\_spend\_bad"}\NormalTok{)}
\NormalTok{result\_bad}\SpecialCharTok{$}\NormalTok{avg\_spend\_bad }\OtherTok{\textless{}{-}} \FunctionTok{round}\NormalTok{(result\_bad}\SpecialCharTok{$}\NormalTok{avg\_spend\_bad, }\DecValTok{2}\NormalTok{)}

\CommentTok{\# Bad practice result}
\FunctionTok{library}\NormalTok{(knitr)}
\FunctionTok{library}\NormalTok{(kableExtra)}

\NormalTok{result\_bad }\SpecialCharTok{|\textgreater{}}
  \FunctionTok{kbl}\NormalTok{(}\AttributeTok{caption =} \StringTok{"Bad practice result"}\NormalTok{) }\SpecialCharTok{|\textgreater{}}
  \FunctionTok{scroll\_box}\NormalTok{(}\AttributeTok{height =} \StringTok{"600px"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{table}

\caption{\label{tab:unnamed-chunk-1}Bad practice result}
\centering
\begin{tabular}[t]{l|r}
\hline
Location\_clean & avg\_spend\_bad\\
\hline
California & 66.30\\
\hline
Florida & 53.33\\
\hline
New York & 67.23\\
\hline
Texas & 55.88\\
\hline
\end{tabular}
\end{table}

\subsection{Plot}\label{plot}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# BAD plot result}
\FunctionTok{barplot}\NormalTok{(}
\NormalTok{  result\_bad}\SpecialCharTok{$}\NormalTok{avg\_spend\_bad,}
  \AttributeTok{names.arg =}\NormalTok{ result\_bad}\SpecialCharTok{$}\NormalTok{Location,}
  \AttributeTok{main =} \StringTok{"Average Spend (BAD PRACTICE)"}\NormalTok{,}
  \AttributeTok{xlab =} \StringTok{"Location"}\NormalTok{,}
  \AttributeTok{ylab =} \StringTok{"Average Spend (USD)"}
\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\textbf{Plot Outcome}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# BAD plot result}
\FunctionTok{barplot}\NormalTok{(}
\NormalTok{  result\_bad}\SpecialCharTok{$}\NormalTok{avg\_spend\_bad,}
  \AttributeTok{names.arg =}\NormalTok{ result\_bad}\SpecialCharTok{$}\NormalTok{Location,}
  \AttributeTok{main =} \StringTok{"Average Spend (BAD PRACTICE)"}\NormalTok{,}
  \AttributeTok{xlab =} \StringTok{"Location"}\NormalTok{,}
  \AttributeTok{ylab =} \StringTok{"Average Spend (USD)"}
\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\pandocbounded{\includegraphics[keepaspectratio]{presentation_files/figure-pdf/unnamed-chunk-2-1.pdf}}

\subsection{Good Practice Example}\label{good-practice-example}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Example of a good practice}
\CommentTok{\# 1) Import packages}
\FunctionTok{library}\NormalTok{(dplyr)}
\FunctionTok{library}\NormalTok{(lubridate)}
\FunctionTok{library}\NormalTok{(ggplot2)}

\CommentTok{\# 2) Read data with good practices}
\NormalTok{data\_good }\OtherTok{\textless{}{-}} \FunctionTok{read.csv}\NormalTok{(}
  \StringTok{"shopping\_behavior.csv"}\NormalTok{,}
  \AttributeTok{stringsAsFactors =} \ConstantTok{FALSE}\NormalTok{,}
  \AttributeTok{check.names =} \ConstantTok{FALSE}   \CommentTok{\# keeps "Purchase Amount (USD)" as{-}is}
\NormalTok{)}

\CommentTok{\# 3) Parse dates correctly}
\NormalTok{data\_good }\OtherTok{\textless{}{-}}\NormalTok{ data\_good }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{mutate}\NormalTok{(}
    \AttributeTok{Date\_good =} \FunctionTok{dmy}\NormalTok{(Date)}
\NormalTok{  )}

\CommentTok{\# 4) Remove exact duplicate rows (we know we injected some)}
\NormalTok{data\_nodup }\OtherTok{\textless{}{-}}\NormalTok{ data\_good }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{distinct}\NormalTok{(}\AttributeTok{.keep\_all =} \ConstantTok{TRUE}\NormalTok{)}

\CommentTok{\# 5) Keep only customers under 30}
\NormalTok{young\_good }\OtherTok{\textless{}{-}}\NormalTok{ data\_nodup }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{filter}\NormalTok{(Age }\SpecialCharTok{\textless{}} \DecValTok{30}\NormalTok{)}

\CommentTok{\# 6) Location lookup table (regions are just for context)}
\NormalTok{location\_info }\OtherTok{\textless{}{-}} \FunctionTok{data.frame}\NormalTok{(}
  \AttributeTok{Location =} \FunctionTok{c}\NormalTok{(}\StringTok{"California"}\NormalTok{, }\StringTok{"New York"}\NormalTok{, }\StringTok{"Texas"}\NormalTok{, }\StringTok{"Florida"}\NormalTok{),}
  \AttributeTok{Region   =} \FunctionTok{c}\NormalTok{(}\StringTok{"West"}\NormalTok{, }\StringTok{"East"}\NormalTok{, }\StringTok{"South"}\NormalTok{, }\StringTok{"South"}\NormalTok{),}
  \AttributeTok{stringsAsFactors =} \ConstantTok{FALSE}
\NormalTok{)}

\CommentTok{\# 7) Safe join: keep all young customers, add Region if Location matches}
\NormalTok{merged\_good }\OtherTok{\textless{}{-}}\NormalTok{ young\_good }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{left\_join}\NormalTok{(location\_info, }\AttributeTok{by =} \StringTok{"Location"}\NormalTok{)}

\CommentTok{\# 8) Clean up Location variants into one standard name}
\NormalTok{final\_clean }\OtherTok{\textless{}{-}}\NormalTok{ merged\_good }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{mutate}\NormalTok{(}
    \AttributeTok{Location\_clean =} \FunctionTok{case\_when}\NormalTok{(}
\NormalTok{      Location }\SpecialCharTok{\%in\%} \FunctionTok{c}\NormalTok{(}\StringTok{"California"}\NormalTok{, }\StringTok{"california"}\NormalTok{, }\StringTok{"Californi"}\NormalTok{, }\StringTok{"CA"}\NormalTok{) }\SpecialCharTok{\textasciitilde{}} \StringTok{"California"}\NormalTok{,}
\NormalTok{      Location }\SpecialCharTok{\%in\%} \FunctionTok{c}\NormalTok{(}\StringTok{"New York"}\NormalTok{, }\StringTok{"NewYork"}\NormalTok{, }\StringTok{"N. York"}\NormalTok{)              }\SpecialCharTok{\textasciitilde{}} \StringTok{"New York"}\NormalTok{,}
      \ConstantTok{TRUE} \SpecialCharTok{\textasciitilde{}}\NormalTok{ Location}
\NormalTok{    )}
\NormalTok{  ) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{group\_by}\NormalTok{(Location\_clean) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{summarise}\NormalTok{(}
    \AttributeTok{avg\_spend\_young =} \FunctionTok{mean}\NormalTok{(}\StringTok{\textasciigrave{}}\AttributeTok{Purchase Amount (USD)}\StringTok{\textasciigrave{}}\NormalTok{, }\AttributeTok{na.rm =} \ConstantTok{TRUE}\NormalTok{),}
    \AttributeTok{n\_customers     =} \FunctionTok{n}\NormalTok{(),}
    \AttributeTok{.groups =} \StringTok{"drop"}
\NormalTok{  ) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{arrange}\NormalTok{(Location\_clean)}

\CommentTok{\# 9) Round numbers to make the table nice for printing}
\NormalTok{final\_clean}\SpecialCharTok{$}\NormalTok{avg\_spend\_young }\OtherTok{\textless{}{-}} \FunctionTok{round}\NormalTok{(final\_clean}\SpecialCharTok{$}\NormalTok{avg\_spend\_young, }\DecValTok{2}\NormalTok{)}

\CommentTok{\# 10) Print final result nicely}
\NormalTok{final\_clean}

\FunctionTok{print}\NormalTok{(final\_clean, }\AttributeTok{n =} \ConstantTok{Inf}\NormalTok{)}
\FunctionTok{View}\NormalTok{(final\_clean)}
\end{Highlighting}
\end{Shaded}

\subsection{Outcome}\label{outcome-1}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Example of a good practice}
\CommentTok{\# 1) Import packages}
\FunctionTok{library}\NormalTok{(dplyr)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}

Attaching package: 'dplyr'
\end{verbatim}

\begin{verbatim}
The following object is masked from 'package:kableExtra':

    group_rows
\end{verbatim}

\begin{verbatim}
The following objects are masked from 'package:stats':

    filter, lag
\end{verbatim}

\begin{verbatim}
The following objects are masked from 'package:base':

    intersect, setdiff, setequal, union
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(lubridate)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}

Attaching package: 'lubridate'
\end{verbatim}

\begin{verbatim}
The following objects are masked from 'package:base':

    date, intersect, setdiff, union
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(ggplot2)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
Warning: package 'ggplot2' was built under R version 4.5.2
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# 2) Read data with good practices}
\NormalTok{data\_good }\OtherTok{\textless{}{-}} \FunctionTok{read.csv}\NormalTok{(}
  \StringTok{"shopping\_behavior.csv"}\NormalTok{,}
  \AttributeTok{stringsAsFactors =} \ConstantTok{FALSE}\NormalTok{,}
  \AttributeTok{check.names =} \ConstantTok{FALSE}   \CommentTok{\# keeps "Purchase Amount (USD)" as{-}is}
\NormalTok{)}

\CommentTok{\# 3) Parse dates correctly}
\NormalTok{data\_good }\OtherTok{\textless{}{-}}\NormalTok{ data\_good }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{mutate}\NormalTok{(}
    \AttributeTok{Date\_good =} \FunctionTok{dmy}\NormalTok{(Date)}
\NormalTok{  )}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
Warning: There was 1 warning in `mutate()`.
i In argument: `Date_good = dmy(Date)`.
Caused by warning:
!  2 failed to parse.
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# 4) Remove exact duplicate rows (we know we injected some)}
\NormalTok{data\_nodup }\OtherTok{\textless{}{-}}\NormalTok{ data\_good }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{distinct}\NormalTok{(}\AttributeTok{.keep\_all =} \ConstantTok{TRUE}\NormalTok{)}

\CommentTok{\# 5) Keep only customers under 30}
\NormalTok{young\_good }\OtherTok{\textless{}{-}}\NormalTok{ data\_nodup }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{filter}\NormalTok{(Age }\SpecialCharTok{\textless{}} \DecValTok{30}\NormalTok{)}

\CommentTok{\# 6) Location lookup table (regions are just for context)}
\NormalTok{location\_info }\OtherTok{\textless{}{-}} \FunctionTok{data.frame}\NormalTok{(}
  \AttributeTok{Location =} \FunctionTok{c}\NormalTok{(}\StringTok{"California"}\NormalTok{, }\StringTok{"New York"}\NormalTok{, }\StringTok{"Texas"}\NormalTok{, }\StringTok{"Florida"}\NormalTok{),}
  \AttributeTok{Region   =} \FunctionTok{c}\NormalTok{(}\StringTok{"West"}\NormalTok{, }\StringTok{"East"}\NormalTok{, }\StringTok{"South"}\NormalTok{, }\StringTok{"South"}\NormalTok{),}
  \AttributeTok{stringsAsFactors =} \ConstantTok{FALSE}
\NormalTok{)}

\CommentTok{\# 7) Safe join: keep all young customers, add Region if Location matches}
\NormalTok{merged\_good }\OtherTok{\textless{}{-}}\NormalTok{ young\_good }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{left\_join}\NormalTok{(location\_info, }\AttributeTok{by =} \StringTok{"Location"}\NormalTok{)}

\CommentTok{\# 8) Clean up Location variants into one standard name}
\NormalTok{final\_clean }\OtherTok{\textless{}{-}}\NormalTok{ merged\_good }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{mutate}\NormalTok{(}
    \AttributeTok{Location\_clean =} \FunctionTok{case\_when}\NormalTok{(}
\NormalTok{      Location }\SpecialCharTok{\%in\%} \FunctionTok{c}\NormalTok{(}\StringTok{"California"}\NormalTok{, }\StringTok{"california"}\NormalTok{, }\StringTok{"Californi"}\NormalTok{, }\StringTok{"CA"}\NormalTok{) }\SpecialCharTok{\textasciitilde{}} \StringTok{"California"}\NormalTok{,}
\NormalTok{      Location }\SpecialCharTok{\%in\%} \FunctionTok{c}\NormalTok{(}\StringTok{"New York"}\NormalTok{, }\StringTok{"NewYork"}\NormalTok{, }\StringTok{"N. York"}\NormalTok{)              }\SpecialCharTok{\textasciitilde{}} \StringTok{"New York"}\NormalTok{,}
      \ConstantTok{TRUE} \SpecialCharTok{\textasciitilde{}}\NormalTok{ Location}
\NormalTok{    )}
\NormalTok{  ) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{group\_by}\NormalTok{(Location\_clean) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{summarise}\NormalTok{(}
    \AttributeTok{avg\_spend\_young =} \FunctionTok{mean}\NormalTok{(}\StringTok{\textasciigrave{}}\AttributeTok{Purchase Amount (USD)}\StringTok{\textasciigrave{}}\NormalTok{, }\AttributeTok{na.rm =} \ConstantTok{TRUE}\NormalTok{),}
    \AttributeTok{n\_customers     =} \FunctionTok{n}\NormalTok{(),}
    \AttributeTok{.groups =} \StringTok{"drop"}
\NormalTok{  ) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{arrange}\NormalTok{(Location\_clean)}

\CommentTok{\# 9) Round numbers to make the table nice for printing}
\NormalTok{final\_clean}\SpecialCharTok{$}\NormalTok{avg\_spend\_young }\OtherTok{\textless{}{-}} \FunctionTok{round}\NormalTok{(final\_clean}\SpecialCharTok{$}\NormalTok{avg\_spend\_young, }\DecValTok{2}\NormalTok{)}

\CommentTok{\# 10) Print final result nicely}
\NormalTok{final\_clean }\SpecialCharTok{|\textgreater{}}
  \FunctionTok{kbl}\NormalTok{(}\AttributeTok{caption =} \StringTok{"Good practice result"}\NormalTok{) }\SpecialCharTok{|\textgreater{}}
  \FunctionTok{scroll\_box}\NormalTok{(}\AttributeTok{height =} \StringTok{"600px"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{table}

\caption{\label{tab:unnamed-chunk-3}Good practice result}
\centering
\begin{tabular}[t]{l|r|r}
\hline
Location\_clean & avg\_spend\_young & n\_customers\\
\hline
Alabama & 52.25 & 20\\
\hline
Alaska & 66.94 & 18\\
\hline
Arizona & 65.50 & 12\\
\hline
Arkansas & 67.42 & 19\\
\hline
California & 66.08 & 25\\
\hline
Colorado & 58.38 & 13\\
\hline
Connecticut & 54.73 & 15\\
\hline
Delaware & 59.82 & 11\\
\hline
Florida & 53.33 & 15\\
\hline
Georgia & 52.75 & 20\\
\hline
Hawaii & 56.55 & 20\\
\hline
Idaho & 62.50 & 18\\
\hline
Illinois & 56.21 & 29\\
\hline
Indiana & 57.64 & 11\\
\hline
Iowa & 61.50 & 20\\
\hline
Kansas & 58.29 & 15\\
\hline
Kentucky & 53.52 & 21\\
\hline
Louisiana & 58.40 & 15\\
\hline
Maine & 54.46 & 25\\
\hline
Maryland & 60.86 & 14\\
\hline
Massachusetts & 64.69 & 13\\
\hline
Michigan & 70.71 & 14\\
\hline
Minnesota & 61.21 & 19\\
\hline
Mississippi & 67.83 & 19\\
\hline
Missouri & 60.31 & 13\\
\hline
Montana & 55.05 & 19\\
\hline
Nebraska & 55.18 & 22\\
\hline
Nevada & 59.95 & 22\\
\hline
New Hampshire & 57.69 & 13\\
\hline
New Jersey & 53.58 & 12\\
\hline
New Mexico & 54.14 & 14\\
\hline
New York & 67.23 & 22\\
\hline
North Carolina & 65.65 & 20\\
\hline
North Dakota & 65.80 & 15\\
\hline
Ohio & 56.31 & 13\\
\hline
Oklahoma & 61.14 & 15\\
\hline
Oregon & 52.47 & 17\\
\hline
Pennsylvania & 68.65 & 26\\
\hline
Rhode Island & 61.91 & 11\\
\hline
South Carolina & 55.77 & 13\\
\hline
South Dakota & 61.61 & 18\\
\hline
Tennessee & 60.74 & 19\\
\hline
Texas & 57.30 & 23\\
\hline
Utah & 64.33 & 15\\
\hline
Vermont & 58.06 & 17\\
\hline
Virginia & 61.20 & 25\\
\hline
Washington & 67.67 & 18\\
\hline
West Virginia & 63.65 & 23\\
\hline
Wisconsin & 66.14 & 14\\
\hline
Wyoming & 57.12 & 16\\
\hline
\end{tabular}
\end{table}

\subsection{Plot}\label{plot-1}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# 11) Plot final results}
\NormalTok{plot\_data }\OtherTok{\textless{}{-}}\NormalTok{ final\_clean }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{arrange}\NormalTok{(avg\_spend\_young) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{mutate}\NormalTok{(}\AttributeTok{Location\_clean =} \FunctionTok{factor}\NormalTok{(Location\_clean, Location\_clean))}

\FunctionTok{ggplot}\NormalTok{(plot\_data, }\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ Location\_clean, }\AttributeTok{y =}\NormalTok{ avg\_spend\_young)) }\SpecialCharTok{+}
  \FunctionTok{geom\_bar}\NormalTok{(}\AttributeTok{stat =} \StringTok{"identity"}\NormalTok{) }\SpecialCharTok{+}
  \FunctionTok{coord\_flip}\NormalTok{() }\SpecialCharTok{+}
  \FunctionTok{labs}\NormalTok{(}
    \AttributeTok{title =} \StringTok{"Average Spend of Customers Under 30 by Location"}\NormalTok{,}
    \AttributeTok{x =} \StringTok{"Location"}\NormalTok{,}
    \AttributeTok{y =} \StringTok{"Average Spend (USD)"}
\NormalTok{  ) }\SpecialCharTok{+} 
  \FunctionTok{theme}\NormalTok{(}
    \AttributeTok{plot.title =} \FunctionTok{element\_text}\NormalTok{(}\AttributeTok{face =} \StringTok{"bold"}\NormalTok{, }\AttributeTok{size =} \DecValTok{20}\NormalTok{, }\AttributeTok{hjust =} \FloatTok{0.5}\NormalTok{),}
    \AttributeTok{axis.text.y =} \FunctionTok{element\_text}\NormalTok{(}\AttributeTok{size =} \DecValTok{8}\NormalTok{),}
    \AttributeTok{axis.text.x =} \FunctionTok{element\_text}\NormalTok{(}\AttributeTok{size =} \DecValTok{8}\NormalTok{)}
\NormalTok{  )}
\end{Highlighting}
\end{Shaded}

\subsection{Plot Outcome}\label{plot-outcome}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# 11) Plot final results}
\NormalTok{plot\_data }\OtherTok{\textless{}{-}}\NormalTok{ final\_clean }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{arrange}\NormalTok{(avg\_spend\_young) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{mutate}\NormalTok{(}\AttributeTok{Location\_clean =} \FunctionTok{factor}\NormalTok{(Location\_clean, Location\_clean))}

\FunctionTok{ggplot}\NormalTok{(plot\_data, }\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ Location\_clean, }\AttributeTok{y =}\NormalTok{ avg\_spend\_young)) }\SpecialCharTok{+}
  \FunctionTok{geom\_bar}\NormalTok{(}\AttributeTok{stat =} \StringTok{"identity"}\NormalTok{) }\SpecialCharTok{+}
  \FunctionTok{coord\_flip}\NormalTok{() }\SpecialCharTok{+}
  \FunctionTok{labs}\NormalTok{(}
    \AttributeTok{title =} \StringTok{"Average Spend of Customers Under 30 by Location"}\NormalTok{,}
    \AttributeTok{x =} \StringTok{"Location"}\NormalTok{,}
    \AttributeTok{y =} \StringTok{"Average Spend (USD)"}
\NormalTok{  ) }\SpecialCharTok{+} 
  \FunctionTok{theme}\NormalTok{(}
    \AttributeTok{plot.title =} \FunctionTok{element\_text}\NormalTok{(}\AttributeTok{face =} \StringTok{"bold"}\NormalTok{, }\AttributeTok{size =} \DecValTok{20}\NormalTok{, }\AttributeTok{hjust =} \FloatTok{0.5}\NormalTok{),}
    \AttributeTok{axis.text.y =} \FunctionTok{element\_text}\NormalTok{(}\AttributeTok{size =} \DecValTok{8}\NormalTok{),}
    \AttributeTok{axis.text.x =} \FunctionTok{element\_text}\NormalTok{(}\AttributeTok{size =} \DecValTok{8}\NormalTok{)}
\NormalTok{  )}
\end{Highlighting}
\end{Shaded}

\pandocbounded{\includegraphics[keepaspectratio]{presentation_files/figure-pdf/unnamed-chunk-4-1.pdf}}

\subsection{Lessons from Data Mismanagement in
Business}\label{lessons-from-data-mismanagement-in-business}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  A \emph{tiny mistake} in data can cause a \textbf{huge mistake} in a
  business decision.
\item
  RStudio won't warn you when the result is \emph{wrong}, only when the
  \textbf{code} is.
\item
  Never \emph{assume} the data is clean, always \textbf{check it}.
\item
  Good analysis starts \textbf{before} modeling with data validation.
\item
  \emph{Being explicit} in your code \textbf{prevents disasters}.
\end{enumerate}

\subsection{}\label{section}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\setcounter{enumi}{5}
\tightlist
\item
  Documentation and reproducible scripts \textbf{protect} you from
  \emph{mistakes}.
\item
  \emph{Joins} are one of the most dangerous operations, \textbf{check
  them twice}.
\item
  \textbf{Data types} matter more than most people realize.
\item
  \emph{Peer} review is \textbf{essential}.
\item
  \textbf{\emph{Great analysts aren't those who make no mistakes, they
  are the ones who catch mistakes early.}}
\end{enumerate}




\end{document}
